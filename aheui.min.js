(function(){
var a=function(){
'use strict';var module$stack = function() {
  this._items = [];
};
module$stack.prototype.push = function(a) {
  this._items.push(a);
};
module$stack.prototype.pop = function() {
  return this._items.pop();
};
module$stack.prototype.every = function(a) {
  for (var e = 0; e < this._items.length && !1 !== a(this._items[e], e); e++) {
  }
};
var Stack$$module$queue = module$stack, module$queue = function() {
  this._tail = this._head = null;
};
module$queue.prototype.push = function(a) {
  a = [a, null];
  this._tail = this._tail ? this._tail[1] = a : this._head = a;
};
module$queue.prototype.pop = function() {
  if (this._head) {
    var a = this._head[0];
    this._head = this._head[1];
    this._head || (this._tail = null);
    return a;
  }
};
module$queue.prototype.append = function(a) {
  this._head = [a, this._head];
};
module$queue.prototype.every = function(a) {
  for (var e = this._head, c = 0; null != e && !1 !== a(e[0], c); e = e[1], c++) {
  }
};
var Stack$$module$operation = module$stack, Queue$$module$operation = module$queue, module$operation = function() {
  return {rawOperation:function(a) {
    return a;
  }, popOperation:function(a, e, c) {
    var l = c || function(a, e, f) {
      return a.push(e);
    };
    return 1 == a ? function(a, c) {
      var f = a.pop();
      return void 0 === f ? !1 : l(a, e(f), c);
    } : 2 == a ? function(a, c) {
      var f = a.pop();
      if (void 0 === f) {
        return !1;
      }
      var h = a.pop();
      return void 0 === h ? (a.append ? a.append(f) : a.push(f), !1) : l(a, e(h, f), c);
    } : function(c, m) {
      for (var f = [], h = a - 1; 0 <= h; h--) {
        if (f[h] = c.pop(), void 0 === f[h]) {
          m = c.append || c.push;
          for (h++; h < a; h++) {
            m.call(c, f[h]);
          }
          return !1;
        }
      }
      return l(c, e.apply(this, f), m);
    };
  }};
}();
var Stack$$module$cell = module$stack, Queue$$module$cell = module$queue, module$cell = function(a, e, c) {
  if ("string" === typeof a || "number" === typeof a) {
    a = module$cell.parseChar(a);
  }
  this._op = e[a[0]];
  this._dir = c[a[1]];
  this._argument = a[2];
};
module$cell.prototype.run = function(a) {
  a.updateDirection(this._dir);
  !1 === this._op(a.stacks[a.currentStack], this._argument) && a.updateDirection(22);
  a.proceedPlane();
};
module$cell.parseChar = function(a) {
  "string" === typeof a && (a = a.charCodeAt(0));
  if (44032 > a || 55203 < a) {
    return [11, 1, 0];
  }
  a -= 44032;
  return [a / 28 / 21 | 0, (a / 28 | 0) % 21, a % 28];
};
var aheui = function() {
  function a(a) {
    return [f, f, c(2, function(d, a) {
      return d / a | 0;
    }), c(2, function(d, a) {
      return d + a;
    }), c(2, function(a, b) {
      return a * b;
    }), c(2, function(a, b) {
      return a % b;
    }), c(1, function(a) {
      return a;
    }, function(d, b, k) {
      21 === k ? a.emit("integer", b) : 27 === k && (65535 >= b || 1114111 < b ? d = String.fromCharCode(b) : (b -= 65536, d = String.fromCharCode((b >> 10) + 55296, b % 1024 + 56320)), a.emit("character", d));
    }), e(function(d, b) {
      21 === b ? d.push(a._intIn.call(a)) : 27 === b ? (b = a._charIn.call(a), d.push("string" === typeof b ? b.charCodeAt(0) : b)) : d.push(m[b]);
    }), c(1, function(a) {
      return a;
    }, function(a, b) {
      a.append ? (a.append(b), a.append(b)) : (a.push(b), a.push(b));
    }), e(function(d, b) {
      a.currentStack = b;
    }), c(1, function(a) {
      return a;
    }, function(d, b, k) {
      a.stacks[k].push(b);
    }), f, c(2, function(a, b) {
      return a >= b ? 1 : 0;
    }), f, c(1, function(a) {
      return 0 != a;
    }, function(d, b) {
      b || (a.dx = -a.dx, a.dy = -a.dy);
    }), f, c(2, function(a, b) {
      return a - b;
    }), c(2, function(a, b) {
      return [b, a];
    }, function(a, b) {
      a.append ? (a.append(b[0]), a.append(b[1])) : (a.push(b[0]), a.push(b[1]));
    }), e(function(d) {
      a.exitCode = d.pop() || 0;
    })];
  }
  var e = module$operation.rawOperation, c = module$operation.popOperation, l = " \u3131 \u3132 \u3133 \u3134 \u3135 \u3136 \u3137 \u3139 \u313a \u313b \u313c \u313d \u313e \u313f \u3140 \u3141 \u3142 \u3144 \u3145 \u3146 \u3147 \u3148 \u314a \u314b \u314c \u314d \u314e".split(" "), n = [5, 0, 13, 0, 21, 0, 29, 0, 19, 0, 0, 0, 27, 3, 0, 0, 0, 11, 18, 22, 20], m = [0, 2, 4, 4, 2, 5, 5, 3, 5, 7, 9, 9, 7, 9, 9, 8, 4, 4, 6, 2, 4, 1, 3, 4, 3, 4, 4, 3], f = e(function() {
  }), h = new module$cell([0, 0, 0], [f], [0]), g = function(k) {
    var d = this;
    this.script = k;
    this._init();
    var b = a(this);
    k = this.script.split(/\r?\n/);
    this.plane = [];
    k.forEach(function(a, k) {
      d.plane[k] = [];
      for (var c = 0; c < a.length; c++) {
        d.plane[k][c] = new module$cell(a.charCodeAt(c), b, n);
      }
    }, this);
    this._callbacks = {};
    this._intIn = function() {
      return -1;
    };
    this._charIn = function() {
      return -1;
    };
  };
  g.prototype._init = function() {
    this.stacks = [];
    for (var a = 0; a < l.length; a++) {
      this.stacks[a] = 21 == a ? new module$queue : new module$stack;
    }
    this.currentStack = 0;
    this.exitCode = null;
    this.stepCount = 0;
    this.running = !1;
    this.dx = this.y = this.x = this._interval = 0;
    this.dy = 1;
  };
  g.prototype.reset = function() {
    this._init();
    this.emit("reset");
  };
  g.prototype.step = function() {
    null === this.exitCode && (this.running || this.emit("start"), this.plane[this.y] && this.plane[this.y][this.x] ? this.plane[this.y][this.x].run(this) : h.run(this), this.stepCount++, this.emit("step"), this.running || (null === this.exitCode ? this.emit("stop") : this.emit("end")));
  };
  g.prototype.run = function(a) {
    if (!this.running) {
      if (this.running = !0, this.emit("start"), "number" === typeof a && 0 < a) {
        this._batch(a);
      } else {
        if (0 === a) {
          for (; null === this.exitCode;) {
            this.step();
          }
          this.running = !1;
          this.emit("end");
        } else {
          this._batch(10000);
        }
      }
    }
  };
  g.prototype._batch = function(a) {
    var d = this;
    d.running && clearInterval(d._interval);
    d._interval = setInterval(function() {
      if (d.running) {
        for (var b = 0; b < a && null === d.exitCode; b++) {
          d.step();
        }
        null !== d.exitCode && (d.running = !1, clearInterval(d._interval), d._interval = 0, d.emit("end"));
      }
    }, 0);
  };
  g.prototype.stop = function() {
    this.running && (clearInterval(this._interval), this.running = !1, this.emit("stop"));
  };
  g.prototype.updateDirection = function(a) {
    var d = a & 4, b = a & 2;
    a & 1 && (this.dx = d ? 1 : 0, this.dy = b ? 1 : 0);
    a & 8 && (d && (this.dx *= 2), b && (this.dy *= 2));
    a & 16 && (d && (this.dx = -this.dx), b && (this.dy = -this.dy));
  };
  g.prototype.proceedPlane = function() {
    this.x += this.dx;
    0 > this.x ? this.x = this.plane[this.y].length - 1 : this.x >= this.plane[this.y].length && 0 !== this.dx && (this.x = 0);
    this.y += this.dy;
    0 > this.y ? this.y = this.plane.length - 1 : this.y >= this.plane.length && (this.y = 0);
  };
  g.prototype.on = function(a, d) {
    var b = this;
    a.split(" ").forEach(function(a) {
      b._callbacks[a] || (b._callbacks[a] = []);
      b._callbacks[a].push(d);
    });
    return this;
  };
  g.prototype.once = function(a, d) {
    var b = this, c = a.split(" "), e = function() {
      var a = this;
      d.apply(this, arguments);
      c.forEach(function(b) {
        return a.off(b, e);
      });
    };
    c.forEach(function(a) {
      b._callbacks[a] || (b._callbacks[a] = []);
      b._callbacks[a].push(e);
    });
    return this;
  };
  g.prototype.off = function(a, d) {
    var b = this;
    a ? a.split(" ").forEach(function(a) {
      if (d) {
        var c = b._callbacks[a] ? b._callbacks[a].indexOf(d) : -1;
        0 <= c && b._callbacks[a].splice(c, 1);
      } else {
        delete b._callbacks[a];
      }
    }) : this._callbacks = {};
    return this;
  };
  g.prototype.emit = function(a, d) {
    for (var b = [], c = 1; c < arguments.length; ++c) {
      b[c - 1] = arguments[c];
    }
    if (this._callbacks[a]) {
      for (c = this._callbacks[a].length - 1; 0 <= c; c--) {
        this._callbacks[a][c].apply(this, b);
      }
    }
    return this;
  };
  g.prototype.setIntegerInput = function(a) {
    var c = this._intIn;
    this._intIn = a;
    return c;
  };
  g.prototype.setCharacterInput = function(a) {
    var c = this._charIn;
    this._charIn = a;
    return c;
  };
  return {Aheui:g, cho:"\u3131\u3132\u3134\u3137\u3138\u3139\u3141\u3142\u3143\u3145\u3146\u3147\u3148\u3149\u314a\u314b\u314c\u314d\u314e".split(""), jung:"\u314f\u3150\u3151\u3152\u3153\u3154\u3155\u3156\u3157\u3158\u3159\u315a\u315b\u315c\u315d\u315e\u315f\u3160\u3161\u3162\u3163".split(""), jong:l};
}();

return aheui
}();
"undefined"!==typeof exports?
("undefined"!==typeof module&&module.exports&&(exports=module.exports=a),exports.aheui=a)
:
"function"===typeof define&&define.amd?
define([],function(){return a})
:
this.aheui=a
}).call(this)
